{
  "name": "check-scheduler",
  "description": "GCP 스케줄링 문제 디버그 - Cloud Scheduler, Cloud Functions, Backend API 로그 확인",
  "prompt": "GCP의 매일 문제 생성 스케줄링 상태를 확인합니다.\n\n다음을 수행하세요:\n\n1. **Cloud Scheduler Job 상태 확인**\n   ```bash\n   gcloud scheduler jobs describe problem-generation-daily --location=us-central1\n   ```\n   - 상태 (ENABLED/PAUSED)\n   - 마지막 실행 시간\n   - 다음 실행 예정 시간\n   - 실행 결과\n\n2. **Cloud Scheduler 실행 로그**\n   ```bash\n   gcloud logging read 'resource.type=\"cloud_scheduler_job\" AND resource.labels.job_id=\"problem-generation-daily\"' --limit=10 --format=json\n   ```\n\n3. **Cloud Function 로그 확인**\n   ```bash\n   gcloud functions logs read problem-worker --region=us-central1 --limit=20\n   ```\n   - 호출 여부\n   - SCHEDULER_API_KEY 환경변수 존재 여부\n   - Backend API 호출 성공/실패\n\n4. **Backend API 로그 확인** (Cloud Run)\n   ```bash\n   gcloud logging read 'resource.type=\"cloud_run_revision\" AND resource.labels.service_name=\"query-craft-backend\" AND textPayload:\"TRIGGER\"' --limit=20 --format=json\n   ```\n\n5. **문제점 식별 및 해결책 제시**\n   - 스케줄러가 비활성화되어 있는가?\n   - Cloud Function이 호출되지 않는가?\n   - 인증 오류 (SCHEDULER_API_KEY 불일치)?\n   - Backend API에 요청이 도달하지 않는가?\n   - 타임존 설정 문제?\n\n6. **수동 테스트** (선택사항)\n   ```bash\n   # Cloud Function 직접 호출\n   curl -X POST https://us-central1-PROJECT_ID.cloudfunctions.net/problem-worker\n   ```\n\n**출력**:\n- 발견된 문제점\n- 로그 요약\n- 해결 방법",
  "tags": ["gcp", "scheduler", "debug", "cloud-functions"]
}
